<!DOCTYPE html>
<html>
<head>
	<title>text21</title>
	<script type="text/javascript">
		//PPT 28 ES6中变量的解构赋值

		//解构赋值：按照一定的模式，从数组和对象中提取值，对变量进行赋值

		//数组的解构赋值
		let[,,third] = ["foo","bar","baz"];
		console.log(third);//"baz"

		let [a,b,[c],d] = [{x:1},3,[true],"ab"];
		console.log(a,b,c,d);//{x: 1} 3 true "ab"

		var [foo2] = [];
		var[bar2,fee2] = [1];
		console.log(foo2,fee2);//undefined undefined

		//两个变量交换值
		var a =[1],b = [2];
		[a,b]= [b,a];
		console.log(a,b);//2 1

		//解构赋值允许有默认值
		//如果赋值为undefined，则是默认值
		var [foo3 = 3]=[];
		console.log(foo3);//3

		[x3, y3 = 'b'] = ['a']; // x3='a', y3='b'
		[x4, y4 = 'b'] = ['a',undefined]; // x4='a'y4='b'

		[x3, y3 = 'b'] = ['a']; // x3=a, y3=b
		[x4, y4 = 'b'] = ['a',null]; // x4=a,y4=null

		function f2(){
			return 2;
		}
		let [x7 = f2()]=[];
		console.log(x7);//2

		let [m1 = n1,n1 = 4] = [];
		console.log(m1,n1);//报错，在声明之前使用

		var [m1 = n1,n1 = 4] = [];
		console.log(m1,n1);//undefined 4

		let a = [];
		let b=[2,3,4];
		a = b;//若没有这一行，则输出false
		console.log(a == b);//true

		//输出数组b中奇数的数
		let a = [];
		let b = [1,2,3,4,5];
		[a[0],a[1],a[2]] = [b[0],b[2],b[4]];
		//[a[0],,a[1],,a[2]] = b;
		console.log(a);[1,3,5]

		//键值对赋值
		var { foo4: baz4 } = { foo4: 'aaa', bar4: 'bbb' };
		console.log(baz4);// "aaa"
		console.log(foo4);//报错
		//声明的变量只是baz4，foo4只是为了匹配

		//对象赋值
		let obj1 = { first: 'hello', last: 'world' };

		let { first: f, last: l } = obj1;
		console.log(f,l);//hello world

		let { first, last } = obj1;
		//相当于 let { first:first, last:last} = obj1;
		console.log(first,last);//hello world

		var obj2 = {
		    p: [
		        'Hello',
		        { y: 'World' }
		    ]
		};
		var { p: [x, { y }] } = obj2;
		console.log(x); //Hello
		console.log(y); //World
		console.log(p);//报错

		var obj2 = {
		    p: [
		        'Hello',
		        { y: 'World' }
		    ]
		};
		var { p} = obj2;
		//var {p:p} = obj2;
		console.log(p); 


		var node = {
		    loc: {
		        start: {
		            line: 1,
		            column: 5
		        }
		    }
		};
		var { loc: { start: { line }} } = node;
		//只有一个变量line，其余都是为了匹配
		console.log(line);//1


		//字符串解构赋值
		const [a, b, c, d, e] = 'hello';
		//相当于将'hello'转成了["h","e","l","l","o"]后解构
		console.log(a); // "h"
		console.log(b); // "e"
		console.log(c); // "l"
		console.log(d); // "l"
		console.log(e); // "o"



		//函数参数的解构也可以使用默认值
		function move1({x = 0, y = 0} = {}) {
		    return [x, y];
		}
		console.log(move1({x: 3, y: 4})); // [3, 4]
		console.log(move1({x: 3})); // [3, 0]
		console.log(move1({})); // [0, 0]
		console.log(move1()); // [0, 0]
	</script>
</head>
<body>

</body>
</html>