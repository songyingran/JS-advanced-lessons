<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script>
        //PPT 26 JS异步与网络数据交互

        //JS异步相关概念
        //线程是程序执行流的最基本单元（类比单个实体的人），是进程中的一个实体，JS是单线程的
        //一个线程可与同属一个进程的其他线程共享进程所拥有的系统资源
        //阻塞是指调用结果返回之前，当前线程会被挂起，调用线程只有在得到结果之后才会返回
        //非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程
        //同步任务：在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务
        //异步任务：不进入主线程，而进入“任务队列”的任务，只有等主线程任务执行完毕，“任务队列”开始通知主线程，请求执行任务，该任务才会进入主线程执行

        //JS异步的几种形式
        //1.回调函数

        var arr1 = [1,3,5,7,9];
        console.log("arr1:",arr1);//arr1:[1, 3, 5, 7, 9]
        var newArray1 = arr1.map(function(a){
        	return a*a;
        });
        console.log("newArray1:",newArray1);//newArray1:[1, 9, 25, 49, 81]

        //2.事件监听机制  任务的执行不取决于代码的顺序执行，而取决于某个事件是否发生

        document.onclick = function(){
        	console.log("document 被击中了！");
        };

        //3.发布订阅

        var Subject = function(){
			var _observer = [];
			this.attach = function(observer){
			    _observer.push(observer);
			};
			this.detach = function(){
			    _observer.pop();
			};
			this.notify = function(msg){
			    for(var i=0;i<_observer.length;i++){
			        _observer[i].update(msg);
			    }
			};
			this.print = function(){
			    console.log(_observer.length);
			    console.log(_observer);
			};
		};

		//4.Promise

		//JS异步与数据交互

		//Ajax 异步JavaScript和XML
		//Ajax是一种使用现有标准和技术的综合实现
		//Ajax是与服务器交换数据并更新部分网页的艺术
		//Ajax参照demo的node模块

		//XMLHttpRequest 通过XMLHttpRequest实例化的对象可用于在后台与服务器交换数据，在不重新加载整个网页的情况下，对网页的某部分进行更新
		//XMLHttpRequest参照demo的HTTP模块
    </script>
</head>
<body>
    
</body>
</html>